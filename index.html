<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>KenFolios – New Homepage Coming Soon</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex,nofollow" />
  <style>
    :root {
      --kf-red: #E11D2E;
      --kf-dark: #0f172a;
      --kf-bg: #020617;
      --kf-text: #f9fafb;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1f2937 0, #020617 55%, #000 100%);
      color: var(--kf-text);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .wrapper {
      max-width: 720px;
      width: 100%;
      padding: 24px;
    }

    .card {
      background: rgba(15, 23, 42, 0.95);
      border-radius: 24px;
      border: 1px solid rgba(248, 250, 252, 0.06);
      box-shadow:
        0 24px 60px rgba(0, 0, 0, 0.6),
        0 0 0 1px rgba(15, 23, 42, 0.8);
      padding: 32px 24px 28px;
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -120px;
      background: radial-gradient(circle at top left, rgba(225, 29, 46, 0.25), transparent 60%);
      opacity: 0.9;
      pointer-events: none;
    }

    .card-inner {
      position: relative;
      z-index: 1;
      display: grid;
      gap: 24px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(248, 250, 252, 0.08);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: rgba(248, 250, 252, 0.8);
    }

    .badge-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--kf-red);
      box-shadow: 0 0 0 0 rgba(225, 29, 46, 0.65);
      animation: ping 1.4s infinite;
    }

    @keyframes ping {
      0% {
        transform: scale(1);
        opacity: 1;
      }
      75% {
        transform: scale(2.2);
        opacity: 0;
      }
      100% {
        transform: scale(2.2);
        opacity: 0;
      }
    }

    h1 {
      font-size: clamp(1.9rem, 3vw, 2.3rem);
      line-height: 1.1;
      font-weight: 700;
    }

    h1 span.highlight {
      color: var(--kf-red);
    }

    .subtext {
      font-size: 0.95rem;
      line-height: 1.6;
      color: rgba(248, 250, 252, 0.78);
      max-width: 34rem;
    }

    .timer-section {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      align-items: center;
      justify-content: space-between;
    }

    .timer-circle {
      position: relative;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      display: grid;
      place-items: center;
      background:
        radial-gradient(circle at 30% 0, rgba(248, 250, 252, 0.16), transparent 55%),
        conic-gradient(
          from 270deg,
          var(--kf-red) var(--progress, 0deg),
          rgba(51, 65, 85, 0.9) var(--progress, 0deg)
        );
      padding: 3px;
      transition: background 0.25s ease-out;
    }

    .timer-inner {
      width: 86%;
      height: 86%;
      border-radius: 50%;
      background: rgba(15, 23, 42, 0.98);
      display: grid;
      place-items: center;
      box-shadow: inset 0 0 18px rgba(15, 23, 42, 0.9);
    }

    .timer-value {
      font-size: 2.4rem;
      font-weight: 700;
      line-height: 1;
    }

    .timer-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: rgba(148, 163, 184, 0.95);
      margin-top: 4px;
    }

    .timer-text-block {
      flex: 1;
      min-width: 220px;
    }

    .timer-heading {
      font-size: 0.9rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: rgba(248, 250, 252, 0.7);
      margin-bottom: 8px;
    }

    .timer-description {
      font-size: 0.9rem;
      color: rgba(209, 213, 219, 0.9);
      margin-bottom: 12px;
    }

    .progress-track {
      width: 100%;
      height: 5px;
      border-radius: 999px;
      overflow: hidden;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(15, 23, 42, 0.9);
    }

    .progress-bar {
      height: 100%;
      width: 0;
      border-radius: inherit;
      background: linear-gradient(90deg, #fecaca, var(--kf-red));
      transition: width 0.28s ease-out;
    }

    .redirect-note {
      margin-top: 12px;
      font-size: 0.8rem;
      color: rgba(148, 163, 184, 0.9);
    }

    .redirect-note a {
      color: #fca5a5;
      text-decoration: none;
      border-bottom: 1px dotted rgba(252, 165, 165, 0.5);
    }

    .redirect-note a:hover {
      text-decoration: underline;
    }

    @media (max-width: 640px) {
      .card {
        padding: 24px 18px 22px;
      }
      .timer-section {
        gap: 16px;
      }
      .timer-circle {
        width: 100px;
        height: 100px;
      }
      .timer-value {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>
  <main class="wrapper">
    <section class="card" aria-labelledby="headline">
      <div class="card-inner">
        <div>
          <div class="badge">
            <span class="badge-dot"></span>
            KenFolios Update
          </div>
          <h1 id="headline">
            Our homepage is <span class="highlight">getting a new look.</span>
          </h1>
          <p class="subtext">
            We’re refreshing the KenFolios experience. In just a moment, you’ll be taken to our
            community space where the action continues as usual.
          </p>
        </div>

        <div class="timer-section">
          <div class="timer-circle" id="timerCircle">
            <div class="timer-inner">
              <div style="text-align:center;">
                <div class="timer-value" id="countdownValue">10</div>
                <div class="timer-label">seconds</div>
              </div>
            </div>
          </div>

          <div class="timer-text-block">
            <div class="timer-heading">Auto redirect in progress</div>
            <div class="timer-description">
              Please wait while we redirect you to the KenFolios Community.  
              Your content, stories, and connections remain fully accessible.
            </div>
            <div class="progress-track" aria-hidden="true">
              <div class="progress-bar" id="progressBar"></div>
            </div>
            <p class="redirect-note">
              If you’re not redirected automatically, 
              <a href="https://kenfolios.com/community/" id="manualLink">click here to continue</a>.
            </p>
          </div>
        </div>
      </div>
    </section>
  </main>
<script>
/*
  Homepage Order Loader
  - Detects /community/order/<ref_id>
  - POSTs to your worker: /api/order/by-ref
  - Renders Saved Notice + Order Box using existing frontend helpers
  - Shows friendly error & retry on failure
*/
(function () {
  const WORKER_URL = "https://kf-members-submit-z9p4x-worker.ksn-nvl.workers.dev/api/order/by-ref";

  // match /community/order/<ref>
  const path = window.location.pathname || "";
  const m = path.match(/^\/community\/order\/([A-Za-z0-9\-_.]+)\/?$/);
  if (!m) return; // not an order page

  const refId = m[1];

  // Remove join form if present
  const joinForm = document.getElementById("kfJoinInfoForm");
  if (joinForm) joinForm.remove();

  // Create container at top of body
  const container = document.createElement("div");
  container.id = "kf-order-loader";
  container.style.padding = "20px";
  container.style.maxWidth = "980px";
  container.style.margin = "18px auto";
  container.style.fontFamily = "system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial";
  container.style.fontSize = "1rem";
  container.style.boxSizing = "border-box";
  container.textContent = "Loading order…";
  document.body.prepend(container);

  function showError(msg, details) {
    container.innerHTML = "";
    const h = document.createElement("div");
    h.style.color = "#b91c1c";
    h.style.fontWeight = 700;
    h.style.marginBottom = "8px";
    h.textContent = msg;
    container.appendChild(h);

    if (details) {
      const pre = document.createElement("pre");
      pre.style.whiteSpace = "pre-wrap";
      pre.style.fontSize = ".9rem";
      pre.style.color = "#444";
      pre.textContent = details;
      container.appendChild(pre);
    }

    const tryBtn = document.createElement("button");
    tryBtn.textContent = "Try again";
    tryBtn.style.marginTop = "12px";
    tryBtn.style.padding = "8px 12px";
    tryBtn.style.borderRadius = "6px";
    tryBtn.style.border = "1px solid #ddd";
    tryBtn.style.background = "#fff";
    tryBtn.style.cursor = "pointer";
    tryBtn.onclick = () => { container.textContent = "Loading order…"; load(); };
    container.appendChild(tryBtn);

    const sup = document.createElement("div");
    sup.style.marginTop = "12px";
    sup.style.color = "#444";
    sup.style.fontSize = ".9rem";
    sup.textContent = "If this persists, contact support with Order ID: " + refId;
    container.appendChild(sup);
  }

  async function load() {
    try {
      const res = await fetch(WORKER_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ ref_id: refId })
      });

      console.log("kf-order-loader: fetch status", res.status);

      const text = await res.text();
      let json;
      try { json = text ? JSON.parse(text) : {}; } catch (e) { json = null; }

      if (res.status === 200 && json && json.ok) {
        const order = json.order;
        container.innerHTML = "";

        // Saved notice (uses your frontend function)
        if (typeof createSavedNotice === "function") {
          container.appendChild(createSavedNotice(order.order_ref, order.order_created_at, null, false));
        } else {
          const h = document.createElement("div");
          h.style.fontWeight = 700;
          h.textContent = `Order: ${order.order_ref}`;
          container.appendChild(h);
        }

        // Build order UI (uses your frontend function)
        if (typeof buildOrderBox === "function") {
          const box = buildOrderBox(order);
          container.appendChild(box.wrap);

          // Wire up coupon & pay using the order.member.id
          if (box.applyBtn) {
            box.applyBtn.addEventListener("click", function () {
              if (typeof applyCoupon === "function") {
                applyCoupon(order.member.id, box.couponInput.value.trim(), box);
              } else {
                console.warn("applyCoupon() not defined");
              }
            });
          }
          if (box.payBtn) {
            box.payBtn.addEventListener("click", function () {
              if (typeof confirmPay === "function") {
                confirmPay(order.member.id, box);
              } else {
                console.warn("confirmPay() not defined");
              }
            });
          }
        } else {
          // fallback plain rendering if helpers missing
          const msg = document.createElement("div");
          msg.textContent = "Order loaded but UI helpers are not present on this page.";
          container.appendChild(msg);
        }

        return;
      }

      // Not ok — show friendly error with backend message if available
      const details = (json && json.message) ? json.message : (text || "No details");
      showError("Order not found or cannot be loaded.", details);

    } catch (err) {
      console.error("kf-order-loader error:", err);
      showError("Network error while fetching order.", String(err));
    }
  }

  // Kick off load
  load();

})();
</script>


  <script>
    (function () {
      const REDIRECT_URL = "https://kenfolios.com/community/";
      const TOTAL_SECONDS = 10;

      const countdownEl = document.getElementById("countdownValue");
      const progressBarEl = document.getElementById("progressBar");
      const timerCircleEl = document.getElementById("timerCircle");
      const manualLinkEl = document.getElementById("manualLink");

      let remaining = TOTAL_SECONDS;

      manualLinkEl.addEventListener("click", function (e) {
        // allow normal navigation, but clear interval so we don't double-fire
        clearInterval(intervalId);
      });

      function updateUI() {
        countdownEl.textContent = remaining.toString();

        const progressRatio = (TOTAL_SECONDS - remaining) / TOTAL_SECONDS;
        progressBarEl.style.width = (progressRatio * 100).toFixed(2) + "%";

        const degrees = 360 * progressRatio;
        timerCircleEl.style.setProperty("--progress", degrees + "deg");
      }

      function tick() {
        updateUI();

        if (remaining <= 0) {
          clearInterval(intervalId);
          window.location.href = REDIRECT_URL;
          return;
        }

        remaining -= 1;
      }

      // Initial paint
      updateUI();

      // Start countdown (1-second interval)
      const intervalId = setInterval(tick, 1000);
    })();
  </script>
  
</body>
</html>
