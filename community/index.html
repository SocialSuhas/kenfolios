<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KenFolios Business Community — Join</title>
  <meta name="theme-color" content="#E11D2E" />
  <style>
    :root{
      --kf-red:#E11D2E;
      --border:#e5e7eb;
      --bg:#f8fafc;
      --text:#0f172a;
      --muted:#64748b;
      --left-width:360px;
      --backdrop:rgba(15,23,42,0.35);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial;color:var(--text);background:var(--bg)}

    .shell{
      max-width:1400px;height:100vh;margin:0 auto;display:flex;
      background:#fff;border-left:1px solid var(--border);border-right:1px solid var(--border);
      position:relative
    }

    /* ===== Backdrop ===== */
    .backdrop{
      position:fixed;inset:0;background:var(--backdrop);
      opacity:0;pointer-events:none;transition:opacity .2s ease;
    }
    .shell.left-open .backdrop,
    .shell.profile-open .backdrop{opacity:1;pointer-events:auto}
    @media (min-width:1024px){ .backdrop{display:none} }

    /* ===== Left pane ===== */
    .left{
      width:var(--left-width);flex:0 0 var(--left-width);
      border-right:1px solid var(--border);background:#fff;display:none;
    }
    @media (min-width: 1024px){
      .left{display:block;position:relative;transform:none!important;box-shadow:none!important}
    }
    @media (max-width:1023.98px){
      .left{
        position:fixed;top:0;left:0;height:100vh;display:block;
        width:min(86vw, var(--left-width));
        transform:translateX(-100%);transition:transform .25s ease;
        z-index:30;box-shadow:0 10px 30px rgba(2,6,23,.25);
      }
      .shell.left-open .left{transform:translateX(0)}
    }

    .left .search-box{
      padding:.5rem 1rem;border-bottom:1px solid var(--border);
      display:flex;align-items:center;gap:.5rem
    }
    .left input[type="text"]{
      width:100%;padding:.5rem .75rem;border:1px solid var(--border);
      border-radius:8px;font-size:14px
    }
    .left input::placeholder{color:var(--muted)}
    .left .body{height:calc(100% - 57px);overflow:auto;padding:.5rem;display:flex;flex-direction:column}
    .disclaimer{position:sticky;bottom:0;background:#f8fafc;font-size:11px;color:var(--muted);padding:.5rem 1rem;border-top:1px solid var(--border);text-align:center}

    .member{display:flex;align-items:center;gap:.75rem;padding:.5rem;border-radius:12px;cursor:default}
    .member:hover{background:#f8fafc}
    .avatar{width:40px;height:40px;border-radius:999px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:12px}
    .m-name{font-size:14px;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .m-sub{font-size:12px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

    /* ===== Buttons ===== */
    .arrow-btn{
      border:0;background:#fff;border:1px solid var(--border);
      width:36px;height:36px;border-radius:999px;
      display:inline-flex;align-items:center;justify-content:center;cursor:pointer
    }
    .arrow-btn:hover{background:#f8fafc}
    @media (min-width:1024px){ #openLeft{display:none!important} }
    .shell.left-open #openLeft{display:none!important}

    .icon-btn{
      border:0;background:transparent;width:36px;height:36px;
      border-radius:999px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer
    }
    .icon-btn:hover{background:#f1f5f9}
    .i{width:20px;height:20px}

    @media (min-width:1024px){
      #closeLeft{display:none!important}
    }

    /* ===== Middle (chat) ===== */
    .mid{flex:1;min-width:0;display:flex;flex-direction:column}
    .chat-header{
      display:flex;align-items:center;gap:.75rem;
      padding:1rem;background:#fff;color:var(--text);border-bottom:1px solid var(--border)
    }
    .kf{
      width:44px;height:44px;border-radius:999px;background:var(--kf-red);
      color:#fff;display:flex;align-items:center;justify-content:center;
      font-weight:900;cursor:pointer
    }
    .title{min-width:0}
    .title button{
      background:none;border:0;color:var(--text);font-weight:700;
      font-size:16px;padding:0;cursor:pointer;display:block;text-align:left
    }
    .meta{font-size:12px;color:var(--muted);cursor:pointer}

    /* ===== Header CTA buttons ===== */
    .header-actions{
      margin-left:auto;
      display:flex;
      align-items:center;
      gap:.5rem;
    }
    .cta-btn{
      border:1px solid var(--border);
      background:#fff;
      color:var(--text);
      padding:.4rem .9rem;
      font-size:14px;
      border-radius:999px;
      cursor:pointer;
      transition:background .2s ease;
    }
    .cta-btn:hover{ background:#f8fafc; }
    .cta-btn.primary{
      background:var(--kf-red);
      color:#fff;
      border-color:var(--kf-red);
    }
    .cta-btn.primary:hover{ opacity:.9; }

    /* ===== Chat area ===== */
    .chat-area{
      flex:1;
      overflow:auto;
      background-color:hsl(356, 70%, 96%);
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Cg stroke='%2394a3b8' stroke-width='1.9' fill='none' stroke-linecap='round' stroke-linejoin='round' opacity='0.18'%3E%3Crect x='2' y='2' width='22' height='14' rx='3'/%3E%3C/g%3E%3C/svg%3E");
      background-repeat:repeat;
      background-size:70px 70px;
    }

    /* ===== Chat bubbles ===== */
    .chat-msg{
      display:flex;
      align-items:flex-end;
      gap:.5rem;
      margin:1rem;
      max-width:80%;
    }
    .chat-msg.admin{ flex-direction:row; }
    .chat-msg.member{ flex-direction:row-reverse; margin-left:auto; }

    .chat-msg .avatar{
      width:36px;height:36px;border-radius:999px;display:flex;align-items:center;justify-content:center;
      font-weight:700;font-size:13px;background:var(--kf-red);color:#fff;flex-shrink:0;
    }
    .chat-msg.member .avatar{
      background:hsl(210 70% 92%);
      color:hsl(210 60% 28%);
    }

    /* Grid bubble so bottom row can be L/R with breathing room */
    .chat-msg .bubble{
      background:#fff;
      padding:.6rem .9rem;
      border-radius:16px;
      border:1px solid var(--border);
      display:grid;
      grid-template-columns: 1fr auto;
      row-gap:.65rem;
      column-gap:.75rem;
      max-width:600px;
      width:fit-content;
      position:relative;
      overflow-wrap:break-word;
      word-wrap:break-word;
      word-break:break-word;
    }
    @media (max-width: 639.98px) {
      .chat-msg .bubble { max-width:85%; row-gap:.5rem; }
    }

    /* Tails */
    .chat-msg.admin .bubble::before{
      content:"";
      position:absolute;
      left:-8px;
      bottom:8px;
      width:0;height:0;
      border:8px solid transparent;
      border-right-color:#fff;
    }
    .chat-msg.member .bubble::before{
      content:"";
      position:absolute;
      right:-8px;
      bottom:8px;
      width:0;height:0;
      border:8px solid transparent;
      border-left-color:#fff;
    }

    /* Name/text full width */
    .chat-msg .bubble .name,
    .chat-msg .bubble .text{ grid-column: 1 / -1; }
    .chat-msg .name{ font-size:13px; font-weight:700; color:var(--muted); }
    .chat-msg .text{ font-size:14px; line-height:1.4; color:var(--text); }

    /* Bottom meta row */
    .bubble .reactions{
      grid-column: 1 / 2;
      justify-self: start;
      align-self: end;
      font-size:11px;
      color:var(--muted);
      display:flex;
      align-items:center;
      gap:.5rem;
      line-height:1;
      flex-wrap:wrap;
      white-space:nowrap;
    }
    .bubble .pinned-label,
    .bubble .time{
      grid-column: 2 / 3;
      justify-self: end;
      align-self: end;
      font-size:11px;
      color:var(--muted);
      display:flex;
      align-items:center;
      gap:.35rem;
      line-height:1;
      white-space:nowrap;
      font-weight:600;
    }

    .bubble .reactions .r{
      display:flex;
      align-items:center;
      gap:2px;
    }
    .bubble .reactions .icon{ font-size:13px; }
    .bubble .reactions .count{ min-width:18px; text-align:right; }

    @media (max-width:360px){
      .bubble .reactions,
      .bubble .pinned-label,
      .bubble .time{ font-size:10px; }
      .bubble .reactions .icon{ font-size:12px; }
    }

    /* ===== Centered notifications between chats ===== */
    .chat-notes{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:6px;
      margin:.75rem 1rem;
    }
    .chat-note{
      display:flex;
      justify-content:center;
      width:100%;
    }
    .chat-note .note{
      background:#fff;
      border:1px solid var(--border);
      border-radius:14px;
      padding:.35rem .75rem;
      font-size:12px;
      color:var(--muted);
      display:inline-flex;
      align-items:center;
      gap:.5rem;
      box-shadow:0 2px 10px rgba(2,6,23,.04);
    }

    /* ===== Composer ===== */
    .composer{
      display:flex;align-items:center;gap:.5rem;
      padding:.75rem 1rem;background:#fff;border-top:1px solid var(--border);
    }
    .composer .pill{
      display:flex;align-items:center;flex:1;gap:.5rem;
      border:1px solid var(--border);border-radius:999px;padding:.5rem .75rem;
      background:#fff
    }
    .composer input[type="text"]{
      flex:1;border:0;outline:0;font-size:14px;min-width:0
    }
    .composer .lefty,.composer .righty{display:flex;align-items:center;gap:.25rem}
    .composer .action{border:0;background:transparent;width:36px;height:36px;border-radius:999px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer}
    .composer .action:hover{background:#f1f5f9}
    .composer .send-guard{cursor:text}

    /* ===== Global disclaimer (below composer) ===== */
    .global-disclaimer{
      font-size:11px;
      color:var(--muted);
      text-align:center;
      padding:.5rem 1rem;
      background:#fff;
      border-top:1px solid var(--border);
    }

    /* ===== Right (profile) ===== */
    .right{
      width:0;flex:0 0 0;border-left:0 solid var(--border);background:#fff;
      overflow:hidden;transition:width .25s ease, border-left-width .25s ease;z-index:20
    }
    @media (max-width:1023.98px){
      .shell.profile-open .right{width:100%;flex:0 0 100%;border-left-width:1px}
      .shell.profile-open .mid{display:none}
      .shell.profile-open .left{display:none}
    }
    @media (min-width:1024px) and (max-width:1279.98px){
      .shell.profile-open .right{width:50%;flex:0 0 50%;border-left-width:1px}
      .shell.profile-open .left{display:none}
    }
    @media (min-width:1280px) and (max-width:1535.98px){
      .shell.profile-open .right{width:640px;flex:0 0 640px;border-left-width:1px}
      .shell.profile-open .left{display:none}
    }
    @media (min-width:1536px){
      .shell.profile-open .right{width:720px;flex:0 0 720px;border-left-width:1px}
      .shell.profile-open .left{display:none}
    }

    .p-head{display:flex;align-items:center;justify-content:space-between;padding:1rem;border-bottom:1px solid var(--border)}
    .p-logo{width:44px;height:44px;border-radius:999px;background:var(--kf-red);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:900}
    .p-body{padding:1rem}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:.5rem;margin:1rem 0}
    .card{border:1px solid var(--border);border-radius:12px;padding:.75rem;text-align:center}
    .num{font-weight:800}
    .lbl{font-size:12px;color:var(--muted)}

    /* ===== Mobile header actions below title ===== */
    @media (max-width: 639.98px){
      .chat-header{ flex-wrap: wrap; }
      .header-actions{
        order: 3;
        width:100%;
        margin-left:0;
        margin-top:.5rem;
        display:grid;
        grid-template-columns:repeat(3,1fr);
        gap:.5rem;
      }
      .header-actions .cta-btn{ width:100%; }
    }
  </style>
</head>
<body>
  <div id="shell" class="shell">
    <div id="backdrop" class="backdrop" aria-hidden="true"></div>

    <!-- Left -->
    <aside class="left" aria-label="List">
      <div class="search-box">
        <input type="text" placeholder="Join now to find members..." />
        <button id="closeLeft" class="icon-btn" aria-label="Close members" title="Close">
          <svg class="i" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
          </svg>
        </button>
      </div>
      <div class="body">
        <div id="memberList" role="list"></div>
      <!--
<div class="disclaimer">
  This member list is auto-generated for demonstration purposes. Actual community members may differ.
</div>
-->

      </div>
    </aside>

    <!-- Middle -->
    <main class="mid" role="main">
      <header class="chat-header">
        <button id="openLeft" class="arrow-btn" title="Open members" aria-label="Open members">
          <svg class="i" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <path d="M9 6l6 6-6 6" />
          </svg>
        </button>

        <div class="kf" id="openProfile" title="Open profile">KF</div>
        <div class="title">
          <button id="openProfile2">KenFolios Business Community</button>
          <div class="meta" id="openProfile3">23,000 members</div>
        </div>

        <!-- CTA Buttons -->
        <div class="header-actions">
          <button class="cta-btn" id="aboutBtn">About</button>
          <button class="cta-btn" id="learnBtn">Learn More</button>
          <button class="cta-btn primary" id="joinBtn">Join Now</button>
        </div>
      </header>

      <section class="chat-area" id="chatArea">
        <!-- Notification ABOVE pinned (exactly 1) -->
        <div class="chat-note-slot" data-above-pinned="true"></div>

        <!-- Welcome + intro (PINNED, no timestamp) -->
        <div class="chat-msg admin" id="welcomeMsg">
          <div class="avatar">KF</div>
          <div class="bubble">
            <div class="name">Community Admin</div>
            <div class="text">👋 Welcome to KenFolios Business Community! We’re thrilled to have you here. This space is built for meaningful connections, collaboration, and growth.</div>
            <div class="pinned-label">📌 Pinned</div>
          </div>
        </div>

        <!-- Notification between chats (1–5 allowed) -->
        <div class="chat-note-slot"></div>

        <!-- Demo chat set -->
        <div class="chat-msg member">
          <div class="bubble">
            <div class="name">New Member</div>
            <div class="text">Thank you! Happy to be here. How does this community actually work?</div>
            <div class="time">5 min ago</div>
          </div>
          <div class="avatar" style="background:hsl(210 70% 92%);color:hsl(210 60% 28%)">NM</div>
        </div>

        <div class="chat-msg admin">
          <div class="avatar">KF</div>
          <div class="bubble">
            <div class="name">Community Admin</div>
            <div class="text">Great question! Once you join, you’ll get access to curated business discussions, direct networking, and founder-led initiatives. You can chat, collaborate, and share opportunities in real time.</div>
            <div class="time">4 min ago</div>
          </div>
        </div>

        <!-- Notification between more chats -->
        <div class="chat-note-slot"></div>

        <div class="chat-msg member">
          <div class="bubble">
            <div class="name">New Member</div>
            <div class="text">What do people usually use this for — leads, learning, or partnerships?</div>
            <div class="time">3 min ago</div>
          </div>
          <div class="avatar" style="background:hsl(210 70% 92%);color:hsl(210 60% 28%)">NM</div>
        </div>

        <div class="chat-msg admin">
          <div class="avatar">KF</div>
          <div class="bubble">
            <div class="name">Community Admin</div>
            <div class="text">All three! Members share qualified leads, ask for expert help, and form partnerships. We also run spotlights and weekend huddles to help you learn fast.</div>
            <div class="time">2 min ago</div>
          </div>
        </div>

        <!-- More chats -->
        <div class="chat-msg member">
          <div class="bubble">
            <div class="name">New Member</div>
            <div class="text">Are there any events or live sessions?</div>
            <div class="time">2 min ago</div>
          </div>
          <div class="avatar" style="background:hsl(210 70% 92%);color:hsl(210 60% 28%)">NM</div>
        </div>

        <div class="chat-msg admin">
          <div class="avatar">KF</div>
          <div class="bubble">
            <div class="name">Community Admin</div>
            <div class="text">Yes — monthly founder roundtables, deal rooms, and skill clinics. Recordings are shared for members who can’t join live.</div>
            <div class="time">2 min ago</div>
          </div>
        </div>

        <div class="chat-note-slot"></div>

        <div class="chat-msg member">
          <div class="bubble">
            <div class="name">New Member</div>
            <div class="text">Is there a code of conduct?</div>
            <div class="time">1 min ago</div>
          </div>
          <div class="avatar" style="background:hsl(210 70% 92%);color:hsl(210 60% 28%)">NM</div>
        </div>

        <div class="chat-msg admin">
          <div class="avatar">KF</div>
          <div class="bubble">
            <div class="name">Community Admin</div>
            <div class="text">Simple: Be helpful, transparent, and respectful. No spam or cold pitching — share context and value first. Our moderators keep things high-signal.</div>
            <div class="time">1 min ago</div>
          </div>
        </div>

        <div class="chat-msg member">
          <div class="bubble">
            <div class="name">New Member</div>
            <div class="text">Can I get featured or tell my startup story?</div>
            <div class="time">1 min ago</div>
          </div>
          <div class="avatar" style="background:hsl(210 70% 92%);color:hsl(210 60% 28%)">NM</div>
        </div>

        <div class="chat-msg admin">
          <div class="avatar">KF</div>
          <div class="bubble">
            <div class="name">Community Admin</div>
            <div class="text">Absolutely. Share traction and what others can learn. Our editorial picks stories weekly and features them across our channels.</div>
            <div class="time">Just now</div>
          </div>
        </div>

        <div class="chat-note-slot"></div>

        <div class="chat-msg member">
          <div class="bubble">
            <div class="name">New Member</div>
            <div class="text">Do you have mentors or office hours?</div>
            <div class="time">Just now</div>
          </div>
          <div class="avatar" style="background:hsl(210 70% 92%);color:hsl(210 60% 28%)">NM</div>
        </div>

        <div class="chat-msg admin">
          <div class="avatar">KF</div>
          <div class="bubble">
            <div class="name">Community Admin</div>
            <div class="text">We run mentor AMAs and 1:1 office hours with operators in growth, brand, hiring, and fundraising. Slots are announced in advance.</div>
            <div class="time">Just now</div>
          </div>
        </div>

        <div class="chat-msg member">
          <div class="bubble">
            <div class="name">New Member</div>
            <div class="text">What does a great first post look like?</div>
            <div class="time">Just now</div>
          </div>
          <div class="avatar" style="background:hsl(210 70% 92%);color:hsl(210 60% 28%)">NM</div>
        </div>

        <div class="chat-msg admin">
          <div class="avatar">KF</div>
          <div class="bubble">
            <div class="name">Community Admin</div>
            <div class="text">Keep it crisp: one-liner about what you do, one problem you solve, one thing you need, and one way you can help others. Add a link if relevant.</div>
            <div class="time">Just now</div>
          </div>
        </div>

        <div class="chat-note-slot"></div>

        <div class="chat-msg member">
          <div class="bubble">
            <div class="name">New Member</div>
            <div class="text">Sounds good. Where do I join?</div>
            <div class="time">Just now</div>
          </div>
          <div class="avatar" style="background:hsl(210 70% 92%);color:hsl(210 60% 28%)">NM</div>
        </div>

        <div class="chat-msg admin">
          <div class="avatar">KF</div>
          <div class="bubble">
            <div class="name">Community Admin</div>
            <div class="text">Tap <strong>Join Now</strong> at the top — we’ll guide you through a quick onboarding so you can start meeting relevant founders today.</div>
            <div class="time">Just now</div>
          </div>
        </div>
      </section>

      <!-- Composer -->
      <footer class="composer" role="group" aria-label="Message composer">
        <div class="lefty">
          <button class="action" id="emojiBtn" title="Emoji" aria-label="Emoji picker">
            <svg class="i" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <circle cx="12" cy="12" r="9"/>
              <circle cx="9" cy="10" r="1"/>
              <circle cx="15" cy="10" r="1"/>
              <path d="M8 14c1.5 2 6.5 2 8 0"/>
            </svg>
          </button>
        </div>
        <div class="pill send-guard" id="composerPill" title="Join to start interacting with members">
          <input id="msgInput" type="text" placeholder="Join to start interacting with members" readonly />
        </div>
        <div class="righty">
          <button class="action" id="attachBtn" title="Attach" aria-label="Attach a file">
            <svg class="i" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <path d="M21 15.5V8a5 5 0 0 0-10 0v8a3 3 0 0 0 6 0V9"/>
            </svg>
          </button>
          <button class="action" id="voiceBtn" title="Voice message" aria-label="Record voice">
            <svg class="i" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <rect x="9" y="2" width="6" height="12" rx="3"/>
              <path d="M5 10v2a7 7 0 0 0 14 0v-2"/>
              <path d="M12 19v3"/>
            </svg>
          </button>
        </div>
      </footer>

      <!-- ✅ Global Disclaimer (appears just below the composer) -->
      <div class="global-disclaimer" role="note" aria-label="Demo disclaimer">
        The UI and users shown here are for demonstration purposes and may differ in actual usage.
        &copy; <span id="kfYear"></span> KenFolios Media Private Limited. All rights reserved.
      </div>
    </main>

    <!-- Right -->
    <aside id="profile" class="right" role="complementary" aria-label="Profile panel">
      <div class="p-head">
        <div style="display:flex;align-items:center;gap:.75rem">
          <div class="p-logo">KF</div>
          <div>
            <div style="font-weight:700">KenFolios Business Community</div>
            <div class="lbl">23,000 members</div>
          </div>
        </div>
        <button id="closeProfile" class="icon-btn" aria-label="Close profile" title="Close">
          <svg class="i" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
          </svg>
        </button>
      </div>
      <div class="p-body">
        <p>Since 2013, <strong>KenFolios</strong> has been telling India’s impactful stories — and building a vibrant business community across WhatsApp & Telegram.</p>
        <div class="grid">
          <div class="card"><div class="num">23k</div><div class="lbl">Members</div></div>
          <div class="card"><div class="num">2013</div><div class="lbl">Founded</div></div>
          <div class="card"><div class="num">Pan-India</div><div class="lbl">Chapters</div></div>
        </div>
        <p class="lbl">Responsive behavior: full on phones, 50/50 on laptops, capped on desktops.</p>
      </div>
    </aside>
  </div>

  <script>
    /* ===== Shell & panels ===== */
    (function(){
      var shell = document.getElementById('shell');
      var backdrop = document.getElementById('backdrop');
      var openLeftBtn = document.getElementById('openLeft');
      var closeLeftBtn = document.getElementById('closeLeft');

      function openProfile(){
        shell.classList.remove('left-open');
        shell.classList.add('profile-open');
      }
      function closeProfile(){ shell.classList.remove('profile-open'); }
      function openLeft(){
        shell.classList.remove('profile-open');
        shell.classList.add('left-open');
        lockScroll(true);
      }
      function closeLeft(){
        shell.classList.remove('left-open');
        lockScroll(false);
      }
      function lockScroll(lock){
        if (window.matchMedia('(max-width:1023.98px)').matches) {
          document.documentElement.style.overflow = lock ? 'hidden' : '';
          document.body.style.overflow = lock ? 'hidden' : '';
        } else {
          document.documentElement.style.overflow = '';
          document.body.style.overflow = '';
        }
      }

      document.getElementById('openProfile').addEventListener('click', openProfile);
      document.getElementById('openProfile2').addEventListener('click', openProfile);
      document.getElementById('openProfile3').addEventListener('click', openProfile);
      document.getElementById('closeProfile').addEventListener('click', closeProfile);

      openLeftBtn.addEventListener('click', openLeft);
      closeLeftBtn.addEventListener('click', closeLeft);

      backdrop.addEventListener('click', function(){
        if (shell.classList.contains('left-open')) closeLeft();
        if (shell.classList.contains('profile-open')) closeProfile();
      });
      window.addEventListener('keydown', function(e){
        if (e.key === 'Escape'){ closeLeft(); closeProfile(); }
      });
      window.addEventListener('resize', function(){
        if (window.matchMedia('(min-width:1024px)').matches) lockScroll(false);
      });

      function openJoinProvision(){ console.log('Join flow placeholder'); openProfile(); }
      ['composerPill','msgInput','emojiBtn','attachBtn','voiceBtn'].forEach(function(id){
        var el = document.getElementById(id); if(!el) return;
        el.addEventListener('click', function(e){ e.preventDefault(); openJoinProvision(); });
        el.addEventListener('focus', function(){ openJoinProvision(); });
      });

      document.getElementById('aboutBtn').addEventListener('click', openProfile);
      document.getElementById('joinBtn').addEventListener('click', openProfile);
      document.getElementById('learnBtn').addEventListener('click', function(){
        var target = document.getElementById('welcomeMsg');
        if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    })();

    /* ===== Names pool (shared) ===== */
    (function(){
      window.KF_FIRST = ["Aarav","Aaryan","Abhay","Abhinav","Aditya","Advait","Ahaan","Aisha","Akanksha","Akshay","Amit","Amrita","Ananya","Aniket","Anil","Anisha","Ankit","Ankita","Anmol","Ansh","Arjun","Arnav","Arvind","Asha","Ashish","Ayush","Bhavana","Chirag","Darshan","Dev","Dhruv","Divya","Faizan","Farhan","Gaurav","Harsh","Harsha","Ishaan","Jai","Jatin","Kajal","Kamal","Karan","Kartik","Kavya","Khushi","Kiran","Krishna","Lakshmi","Madhuri","Mahesh","Mansi","Manish","Meera","Megha","Mohit","Namrata","Navin","Neha","Nikita","Nilesh","Nirav","Nisha","Nitin","Pankaj","Parth","Payal","Pooja","Pranav","Prashant","Pratik","Preeti","Priya","Rachna","Rahul","Raj","Rajan","Rajesh","Rakesh","Rishi","Ritika","Rohan","Rohit","Sakshi","Salman","Sameer","Sana","Sandeep","Sanjana","Sanjay","Sanket","Sarthak","Sarita","Seema","Shalini","Shambhavi","Shashank","Shekhar","Shivani","Shraddha","Shubham","Shweta","Sneha","Sonia","Soumya","Suhas","Sumit","Sunil","Suresh","Sushant","Tanay","Tanvi","Tarun","Trisha","Uday","Uma","Urvashi","Vaibhav","Varun","Vasu","Vedant","Vibha","Vidya","Vikram","Vimal","Vinay","Vinita","Viplav","Viraj","Vishal","Yash","Yuvraj"];
      window.KF_LAST  = ["Agrawal","Ahluwalia","Anand","Babu","Bajaj","Balakrishnan","Banerjee","Bansal","Basu","Bhagat","Bhandari","Bharadwaj","Bhat","Bhatia","Bhatnagar","Bhattacharya","Bose","Chandra","Chaudhary","Chawla","Chopra","Das","Desai","Devi","Dixit","Dubey","Gandhi","Ganesh","Garg","Ghosh","Gill","Goel","Gopal","Gopinath","Gupta","Iyer","Jain","Jha","Joshi","Kadam","Kapoor","Kashyap","Kaur","Khanna","Khatri","Kohli","Kulkarni","Kumar","Mahajan","Malhotra","Mehta","Menon","Mishra","Modi","Mukherjee","Murthy","Nair","Naidu","Naik","Namboodiri","Nanda","Narayan","Natarajan","Navlakha","Pandey","Pandit","Parikh","Pillai","Prasad","Raghavan","Rai","Rajput","Raman","Ramaswamy","Rana","Rani","Rao","Reddy","Sachdeva","Saha","Sahu","Saini","Saksena","Salvi","Saran","Sarkar","Saxena","Sen","Sengupta","Sethi","Shah","Shankar","Sharma","Shetty","Shinde","Singh","Sinha","Srinivasan","Subramanian","Tandon","Trivedi","Tyagi","Upadhyay","Varma","Vashisht","Verma","Vyas","Yadav","Zaveri"];
    })();

    /* ===== Member list demo ===== */
    (function(){
      var listEl = document.getElementById('memberList');
      if(!listEl) return;

      var count = 0;
      function pastel(seed){ var h=(seed*47)%360; return {bg: 'hsl('+h+' 70% 92%)', fg:'hsl('+h+' 60% 28%)'}; }

      function makeMember(idx){
        var f = KF_FIRST[Math.floor(Math.random() * KF_FIRST.length)];
        var l = KF_LAST[Math.floor(Math.random() * KF_LAST.length)];
        var initials = (f[0]||'') + (l[0]||'');
        var minutesAgo = idx * 2 + 1;
        var ago = minutesAgo < 60 ? minutesAgo + ' min' : Math.floor(minutesAgo/60) + ' hr';
        var colors = pastel(idx+1);
        var item = document.createElement('div');
        item.className = 'member';
        item.setAttribute('role','listitem');
        item.innerHTML =
          '<div class="avatar" style="background:'+colors.bg+';color:'+colors.fg+'">'+initials+'</div>'+
          '<div style="min-width:0">'+
            '<div class="m-name">'+f+' '+l+'</div>'+
            '<div class="m-sub">'+f+' joined KenFolios · '+ago+' ago</div>'+
          '</div>';
        return item;
      }

      var loading = false;
      function loadMore(n){
        if(loading) return; loading = true;
        var frag = document.createDocumentFragment();
        for(var i=0;i<n;i++) frag.appendChild(makeMember(count++));
        listEl.appendChild(frag);
        loading = false;
      }

      loadMore(40);

      var bodyEl = listEl.parentElement;
      bodyEl.addEventListener('scroll', function(){
        if(bodyEl.scrollTop + bodyEl.clientHeight >= bodyEl.scrollHeight - 40){
          loadMore(30);
        }
      });
    })();

    /* ===== Centered notifications population (uniform ✅; 1 above pinned; 1–5 elsewhere) ===== */
    (function(){
      function rand(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
      function fullName(){ return rand(KF_FIRST) + ' ' + rand(KF_LAST); }
      function randInt(min, max){ return Math.floor(Math.random()*(max-min+1))+min; }

      function singleNoteHTML(name){
        return '<div class="chat-note"><div class="note">✅ <span>'+name+
               '</span> was approved to join the group</div></div>';
      }

      var slots = document.querySelectorAll('.chat-note-slot');
      for(var i=0;i<slots.length;i++){
        var slot = slots[i];
        var isAbovePinned = slot.hasAttribute('data-above-pinned');
        var howMany = isAbovePinned ? 1 : randInt(1,5);
        var buf = '';
        for(var j=0;j<howMany;j++){ buf += singleNoteHTML(fullName()); }
        var container = document.createElement('div');
        container.className = 'chat-notes';
        container.innerHTML = buf;
        slot.parentNode.replaceChild(container, slot);
      }
    })();

    /* ===== Reactions + timestamp logic (👍 ❤️ 🎉) — reactions left, time/pinned right ===== */
    (function(){
      var reactionTypes = [
        { key: 'like', icon: '👍' },
        { key: 'love', icon: '❤️' },
        { key: 'celebrate', icon: '🎉' }
      ];

      function compact(n){
        if(n >= 1000000) return (n/1000000).toFixed(n % 1000000 ? 1 : 0)+'m';
        if(n >= 1000) return (n/1000).toFixed(n % 1000 ? 1 : 0)+'k';
        return String(n);
      }
      function randInt(min, max){ return Math.floor(Math.random()*(max-min+1))+min; }
      function bubbleKey(idx){ return 'kf_react_v7_ord_'+idx; }

      function enforceOrder(counts){
        var like = counts.like|0, love = counts.love|0, cel = counts.celebrate|0;
        if(love < cel){ var d = cel-love; cel-=d; love+=d; }
        if(like < love){ var d2 = love-like; love-=d2; like+=d2; }
        like = Math.max(0, like);
        love = Math.max(0, Math.min(love, like));
        cel  = Math.max(0, Math.min(cel, love));
        var total = (counts.like|0)+(counts.love|0)+(counts.celebrate|0);
        var now = like+love+cel;
        if(now !== total){
          like += (total - now);
          if(like < love){ var d3 = love-like; love-=d3; like+=d3; }
          if(love < cel){ var d4 = cel-love; cel-=d4; love+=d4; }
        }
        counts.like = like; counts.love = love; counts.celebrate = cel;
        return counts;
      }

      function splitTotalOrdered(total){
        if(total <= 0) return { like:0, love:0, celebrate:0 };
        var celBase = Math.floor(total * (0.18 + Math.random()*0.08));
        var loveExtra = Math.floor(total * (0.00 + Math.random()*0.08));
        var loveBase = celBase + loveExtra;
        var likeBase = total - (loveBase + celBase);
        return enforceOrder({ like: likeBase, love: loveBase, celebrate: celBase });
      }

      function incrementOrdered(counts, n){
        var pat2 = [
          {like:2,love:0,celebrate:0},
          {like:1,love:1,celebrate:0}
        ];
        var pat3 = [
          {like:3,love:0,celebrate:0},
          {like:2,love:1,celebrate:0},
          {like:1,love:1,celebrate:1}
        ];
        if(n <= 0) return counts;
        if(n === 1){ counts.like += 1; return counts; }
        if(n === 2){
          var p = pat2[randInt(0, pat2.length-1)];
          counts.like+=p.like; counts.love+=p.love; counts.celebrate+=p.celebrate; return counts;
        }
        if(n >= 3){
          var p3 = pat3[randInt(0, pat3.length-1)];
          counts.like+=p3.like; counts.love+=p3.love; counts.celebrate+=p3.celebrate;
          if(n>3) counts.like += (n-3);
          return counts;
        }
        return counts;
      }

      var bubbles = Array.from(document.querySelectorAll('.chat-area .chat-msg .bubble'));
      if(!bubbles.length) return;
      var pinnedIndex = -1;
      for(var pi=0; pi<bubbles.length; pi++){
        if(bubbles[pi].querySelector('.pinned-label')){ pinnedIndex = pi; break; }
      }

      var baseStart = 80, baseStep = 7, adminBonus = 45, memberBonus = 15, pinnedPeakBoost = 400;
      var nonPinnedStartMinutes = 5;

      var metas = bubbles.map(function(b, idx){
        var msg = b.closest('.chat-msg');
        var isAdmin = msg && msg.classList.contains('admin');
        var isPinned = (idx === pinnedIndex && pinnedIndex !== -1);
        var orderBias = baseStart + (idx * baseStep);
        var roleBias = isAdmin ? adminBonus : memberBonus;
        var base = orderBias + roleBias;
        return { idx: idx, el: b, isAdmin: isAdmin, isPinned: isPinned, base: base };
      });

      if(pinnedIndex !== -1){
        var maxNonPinned = 0;
        for(var m=0;m<metas.length;m++){
          if(!metas[m].isPinned) maxNonPinned = Math.max(maxNonPinned, metas[m].base);
        }
        metas[pinnedIndex].base = Math.max(metas[pinnedIndex].base, maxNonPinned + pinnedPeakBoost);
      }

      // Build reactions container and render counts
      var todayStr = new Date().toISOString().slice(0,10);
      for(var i=0;i<metas.length;i++){
        var meta = metas[i];
        var r = meta.el.querySelector('.reactions');
        if(!r){
          r = document.createElement('div');
          r.className = 'reactions';
          for(var t=0;t<reactionTypes.length;t++){
            var rt = reactionTypes[t];
            var span = document.createElement('span');
            span.className = 'r r-'+rt.key;
            span.innerHTML = '<span class="icon">'+rt.icon+'</span><span class="count">0</span>';
            r.appendChild(span);
          }
          var pinOrTime = meta.el.querySelector('.pinned-label, .time');
          if(pinOrTime){ meta.el.insertBefore(r, pinOrTime); } else { meta.el.appendChild(r); }
        }

        var key = bubbleKey(meta.idx);
        var stored = null;
        try{ stored = JSON.parse(localStorage.getItem(key) || 'null'); }catch(e){ stored = null; }

        if(!stored){
          var total = Math.max(1, Math.round(meta.base + randInt(-5, 5)));
          stored = { counts: splitTotalOrdered(total), lastDay: todayStr };
          localStorage.setItem(key, JSON.stringify(stored));
        }else{
          var last = new Date(stored.lastDay);
          var today = new Date(todayStr);
          var diffDays = Math.floor((today - last)/(1000*60*60*24));
          if(diffDays > 0){
            for(var d=0; d<diffDays; d++){
              var inc = randInt(2,3);
              stored.counts = enforceOrder(incrementOrdered(stored.counts, inc));
            }
            stored.lastDay = todayStr;
            localStorage.setItem(key, JSON.stringify(stored));
          }else{
            stored.counts = enforceOrder(stored.counts);
            localStorage.setItem(key, JSON.stringify(stored));
          }
        }

        // Render counts
        var likeEl = r.querySelector('.r-like .count');
        var loveEl = r.querySelector('.r-love .count');
        var celEl  = r.querySelector('.r-celebrate .count');
        likeEl.textContent = compact(stored.counts.like);
        loveEl.textContent = compact(stored.counts.love);
        celEl.textContent  = compact(stored.counts.celebrate);
      }

      // Timestamps: lower messages more recent (except pinned, which has none)
      var minuteBudget = nonPinnedStartMinutes;
      for(var b=0;b<bubbles.length;b++){
        if(b === pinnedIndex) continue;
        var timeEl = bubbles[b].querySelector('.time');
        if(!timeEl) continue;
        var minutes = Math.max(0, minuteBudget);
        if(minutes <= 0) timeEl.textContent = 'Just now';
        else if(minutes === 1) timeEl.textContent = '1 min ago';
        else timeEl.textContent = minutes + ' min ago';
        minuteBudget = Math.max(0, minuteBudget - 1);
      }
    })();

    /* ===== Dynamic year for disclaimer ===== */
    (function(){
      var y = document.getElementById('kfYear');
      if (y) y.textContent = new Date().getFullYear();
    })();
  </script>
<script>
/* ===== Member count: configurable start + daily incremental (30–50) ===== */
(function(){
  var DEFAULT_START = 23338;  // original starting figure
  var MIN = 30, MAX = 50;     // daily increment range (inclusive)
  var KEY = 'kf_member_counter_v2'; // bumped version to avoid old format issues

  // Allow overriding start: set window.KF_MEMBER_START = <number> before this script
  var desiredStart = (typeof window.KF_MEMBER_START === 'number' && window.KF_MEMBER_START >= 0)
    ? Math.floor(window.KF_MEMBER_START)
    : DEFAULT_START;

  function fmt(n){
    try { return new Intl.NumberFormat('en-IN').format(n); }
    catch(e){ return String(n).replace(/\B(?=(\d{3})+(?!\d))/g, ','); }
  }
  function isoDate(d){
    return new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()))
           .toISOString().slice(0,10);
  }
  function daysBetween(aStr, bStr){
    var a = new Date(aStr+'T00:00:00Z');
    var b = new Date(bStr+'T00:00:00Z');
    return Math.floor((b - a) / 86400000);
  }

  var todayISO = isoDate(new Date());
  var data;
  try { data = JSON.parse(localStorage.getItem(KEY) || '{}'); }
  catch(e){ data = {}; }

  // First-time seed
  if(!data.count || !data.lastDate || typeof data.baseStart !== 'number'){
    data = { count: desiredStart, baseStart: desiredStart, lastDate: todayISO };
  } else {
    // If the configured starting figure changed later, migrate by the delta
    if (data.baseStart !== desiredStart) {
      var delta = desiredStart - data.baseStart;
      data.count = Math.max(0, (data.count|0) + delta);
      data.baseStart = desiredStart;
    }
    // Catch up day-by-day increments
    var diff = daysBetween(data.lastDate, todayISO);
    if(diff > 0){
      var incTotal = 0;
      for(var i=0;i<diff;i++){
        incTotal += Math.floor(Math.random() * (MAX - MIN + 1)) + MIN;
      }
      data.count += incTotal;
      data.lastDate = todayISO;
    }
  }

  // Persist
  localStorage.setItem(KEY, JSON.stringify(data));

  // Render
  function renderCount(n){
    var text = fmt(n) + ' members';
    var headerEl = document.getElementById('openProfile3');
    if(headerEl) headerEl.textContent = text;
    var profileEl = document.querySelector('#profile .p-head .lbl');
    if(profileEl) profileEl.textContent = text;
  }
  renderCount(data.count);

  // Expose helpers to change the start later (no reset needed)
  window.KF_setMemberStart = function(newStart){
    var ns = Number(newStart);
    if (!isFinite(ns) || ns < 0) return false;
    ns = Math.floor(ns);
    try {
      var d = JSON.parse(localStorage.getItem(KEY) || '{}') || {};
      if (typeof d.count !== 'number' || typeof d.baseStart !== 'number') {
        d = { count: ns, baseStart: ns, lastDate: isoDate(new Date()) };
      } else {
        var delta = ns - d.baseStart;
        d.count = Math.max(0, (d.count|0) + delta);
        d.baseStart = ns;
      }
      localStorage.setItem(KEY, JSON.stringify(d));
      renderCount(d.count);
      return true;
    } catch(e){ return false; }
  };

  // Optional: full reset utility if you ever want to start fresh
  window.KF_resetMemberCounter = function(startAt){
    var ns = Number(startAt);
    if (!isFinite(ns) || ns < 0) ns = desiredStart;
    var fresh = { count: Math.floor(ns), baseStart: Math.floor(ns), lastDate: isoDate(new Date()) };
    localStorage.setItem(KEY, JSON.stringify(fresh));
    renderCount(fresh.count);
    return true;
  };
})();
</script>


</body>
</html>
